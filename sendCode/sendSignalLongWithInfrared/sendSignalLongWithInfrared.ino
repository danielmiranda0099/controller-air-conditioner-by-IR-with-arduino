#include <IrSenderPwm.h>

static constexpr unsigned long BAUD = 115200UL;
static constexpr pin_t PIN = 3U;

// SIGNAL THE irreseiberpoll de la library infrared4arduino
static const microseconds_t array[] = { 505U, 17760U, 2992U, 8893U, 505U, 505U, 505U, 1443U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 1443U, 505U, 505U, 505U, 505U, 505U, 1443U, 505U, 1443U, 505U, 505U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 1443U, 505U, 1443U, 505U, 2992U, 2992U, 8893U, 505U, 1443U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 1443U, 505U, 505U, 505U, 505U, 505U, 1443U, 505U, 505U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 2992U, 2992U, 8893U, 505U, 1443U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 1443U, 505U, 505U, 505U, 505U, 505U, 1443U, 505U, 505U, 505U, 1443U, 505U, 1443U, 505U, 505U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 1443U, 505U, 505U, 505U, 505U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 505U, 505U, 1443U, 505U, 1443U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 1443U, 505U, 1443U, 505U, 30004U };
//{628 ,17760 ,3040 ,8896 ,552 ,440 ,552 ,1436 ,552 ,448 ,544 ,440 ,552 ,448 ,548 ,440 ,552 ,448 ,548 ,448 ,540 ,448 ,548 ,1444 ,544 ,472 ,520 ,472 ,536 ,1452 ,544 ,1440 ,548 ,444 ,552 ,1440 ,544 ,1440 ,548 ,1440 ,548 ,1440 ,544 ,1444 ,548 ,448 ,540 ,448 ,548 ,448 ,548 ,464 ,528 ,464 ,540 ,456 ,540 ,460 ,540 ,448 ,548 ,448 ,548 ,448 ,548 ,436 ,552 ,448 ,548 ,440 ,552 ,448 ,548 ,440 ,552 ,448 ,548 ,436 ,552 ,452 ,544 ,444 ,548 ,452 ,544 ,452 ,540 ,456 ,536 ,472 ,536 ,452 ,548 ,456 ,540 ,444 ,552 ,444 ,548 ,444 ,552 ,444 ,552 ,444 ,548 ,444 ,548 ,444 ,552 ,444 ,548 ,452 ,540 ,1436 ,552 ,1444 ,560 ,2928 ,3032 ,8888 ,544 ,1468 ,532 ,456 ,544 ,448 ,548 ,448 ,544 ,448 ,548 ,448 ,548 ,448 ,548 ,440 ,552 ,448 ,544 ,1436 ,552 ,440 ,552 ,448 ,548 ,1440 ,544 ,448 ,544 ,1440 ,548 ,1468 ,520 ,1464 ,544 ,1440 ,548 ,1444 ,544 ,1440 ,548 ,444 ,552 ,444 ,548 ,444 ,544 ,448 ,548 ,448 ,548 ,440 ,552 ,448 ,548 ,448 ,540 ,448 ,548 ,448 ,548 ,464 ,528 ,464 ,544 ,456 ,544 ,448 ,544 ,448 ,548 ,448 ,548 ,448 ,548 ,440 ,552 ,448 ,548 ,436 ,552 ,448 ,548 ,440 ,552 ,448 ,548 ,444 ,544 ,448 ,552 ,444 ,544 ,448 ,552 ,444 ,544 ,472 ,524 ,472 ,536 ,452 ,548 ,444 ,552 ,444 ,548 ,444 ,552 ,444 ,552 ,444 ,548 ,2940 ,3020 ,8896 ,556 ,1432 ,548 ,448 ,548 ,448 ,544 ,448 ,548 ,448 ,544 ,448 ,548 ,448 ,544 ,448 ,544 ,476 ,520 ,1460 ,548 ,448 ,548 ,448 ,544 ,1436 ,552 ,448 ,548 ,1432 ,552 ,1436 ,552 ,440 ,552 ,1444 ,544 ,1440 ,548 ,1440 ,544 ,1468 ,520 ,1468 ,536 ,1448 ,544 ,1444 ,544 ,1440 ,552 ,436 ,552 ,448 ,548 ,448 ,544 ,1436 ,552 ,1436 ,552 ,1440 ,544 ,448 ,548 ,448 ,540 ,460 ,536 ,472 ,524 ,464 ,548 ,1444 ,548 ,448 ,544 ,448 ,548 ,1436 ,552 ,1432 ,552 ,1440 ,548 ,444 ,552 ,1432 ,548 ,1440 ,548 ,456 ,540 ,452 ,544 ,452 ,536 ,472 ,520 ,472 ,540 ,456 ,540 ,456 ,544 ,456 ,536 ,448 ,548 ,1440 ,548 ,1436 ,552 ,30004};
//signal OFF { 505U, 17760U, 2992U, 8893U, 505U, 505U, 505U, 1443U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 1443U, 505U, 505U, 505U, 505U, 505U, 1443U, 505U, 1443U, 505U, 505U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 1443U, 505U, 1443U, 505U, 2992U, 2992U, 8893U, 505U, 1443U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 1443U, 505U, 505U, 505U, 505U, 505U, 1443U, 505U, 505U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 2992U, 2992U, 8893U, 505U, 1443U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 1443U, 505U, 505U, 505U, 505U, 505U, 1443U, 505U, 505U, 505U, 1443U, 505U, 1443U, 505U, 505U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 1443U, 505U, 505U, 505U, 505U, 505U, 1443U, 505U, 1443U, 505U, 1443U, 505U, 505U, 505U, 1443U, 505U, 1443U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 1443U, 505U, 1443U, 505U, 30004U };
//signal ON { 505U, 17780U, 2988U, 8899U, 505U, 505U, 505U, 1444U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 1444U, 505U, 505U, 505U, 505U, 505U, 1444U, 505U, 505U, 505U, 505U, 505U, 1444U, 505U, 1444U, 505U, 1444U, 505U, 1444U, 505U, 1444U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 1444U, 505U, 1444U, 505U, 1444U, 505U, 1444U, 505U, 2988U, 2988U, 8899U, 505U, 1444U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 1444U, 505U, 505U, 505U, 505U, 505U, 1444U, 505U, 505U, 505U, 1444U, 505U, 1444U, 505U, 1444U, 505U, 1444U, 505U, 1444U, 505U, 1444U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 2988U, 2988U, 8899U, 505U, 1444U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 1444U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 1444U, 505U, 1444U, 505U, 505U, 505U, 1444U, 505U, 1444U, 505U, 1444U, 505U, 1444U, 505U, 1444U, 505U, 1444U, 505U, 1444U, 505U, 1444U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 1444U, 505U, 1444U, 505U, 1444U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 1444U, 505U, 505U, 505U, 505U, 505U, 1444U, 505U, 1444U, 505U, 505U, 505U, 1444U, 505U, 1444U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 505U, 1444U, 505U, 1444U, 505U, 1444U, 505U, 1444U, 505U, 30008U };

static const IrSequence irSequence(array, sizeof(array) / sizeof(microseconds_t));
static IrSender* irSender;

void setup() {
    pinMode(12, OUTPUT);
    digitalWrite(12, LOW);
    Serial.begin(BAUD);
    while (!Serial)
        ;
    if (Board::getInstance()->hasHardwarePwm())
        Serial.println(F("Hardware PWM available!"));
    else
        Serial.println(F("Hardware PWM NOT available, will be emulated in software."));
    randomSeed(analogRead(A0));
    irSender = IrSenderPwm::getInstance(true, PIN);
}

void loop() {

    //9 12 13 17 18 19 - 22 34 35 36 37 38 
    delay(5000);
    irSender->send(irSequence, 38000, 33);
    
}
